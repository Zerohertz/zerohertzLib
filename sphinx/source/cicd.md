# CI/CD Pipelines

```{admonition} Used Stacks
:class: important

1. Jenkins (Black, Setuptools, PyTest, Sphinx)
2. GitHub Actions
```

<p align="center">
    <img width="1844" alt="CI/CD" src="https://github-production-user-asset-6210df.s3.amazonaws.com/42334717/283978168-5c8db5de-1d72-44f4-b6a1-8a7b914a3460.png">
</p>

|Stage|Condition|
|:-:|-|
|1. `Setup`|⭕ [`*` Push]|
|2. `Merge From Docs`|⭕ [`*` Push] "Merge pull request\*/docs"</br>⭕ [`*` Push] "Merge pull request*[Docs] Build by Sphinx for GitHub Pages"|
|3. `1. Lint`|⭕ [`dev*` Push]<br>⭕ [`master` PR] (Except "Merge pull request\*/docs" && "Merge pull request\*[Docs] Build by Sphinx for GitHub Pages")|
|4. `2. Build`|⭕ [`master` Push] (Except "Merge pull request\*/docs\*")</br>⭕ [`dev*` Push]<br>⭕ [`master` PR] (Except "Merge pull request\*/docs" && "Merge pull request\*[Docs] Build by Sphinx for GitHub Pages")|
|5. `3. Test`|⭕ [`dev*` Push]<br>⭕ [`master` PR] (Except "Merge pull request\*/docs" && "Merge pull request\*[Docs] Build by Sphinx for GitHub Pages")|
|6. `4. Docs`|⭕ [`master` PR] (Except "Merge pull request\*/docs" && "Merge pull request\*[Docs] Build by Sphinx for GitHub Pages")|
|7. `Deploy`|⭕ [`master` Push] (Except "Merge pull request\*/docs\*")|

## Dev Branch

<p align="center">
   <img width="872" alt="dev-branch" src="https://github-production-user-asset-6210df.s3.amazonaws.com/42334717/283978156-45e1568a-77d5-49bb-9ad7-fb3c5d74996a.png">
</p>

1. `dev-*` push
   1. `Setup`: Commit message parsing
   2. `1. Lint`: Check format of python codes
   3. `2. Build`: Install dependencies & build package
   4. `3. Test`: Do PyTest
2. `dev-*` → `master`
   1. `Setup`: Commit message parsing
   2. `1. Lint`: Check format of python codes
   3. `2. Build`: Install dependencies & build package
   4. `3. Test`: Do PyTest
   5. `4. Docs`: Create PR (`docs` → `dev-*`) including the build results generated by Sphinx
   6. `Merge From Docs`: If merge PR from `docs`, can merge `dev-*` → `master`
3. `master` push
   1. `Setup`: Commit message parsing
   2. `2. Build`: Install dependencies & build package
   3. `Deploy`
      1. `GitHub`: Deploy to GitHub
      2. `PyPI`: Deploy to PyPI

## Docs Branch


<p align="center">
   <img width="872" alt="dev-branch" src="https://github-production-user-asset-6210df.s3.amazonaws.com/42334717/283978137-5b8f720b-0779-4980-98b6-eea515f24a31.png">
</p>

1. `docs-*` push
   1. `Setup`: Commit message parsing
2. `docs-*` → `master`
   1. `Setup`: Commit message parsing
   2. `1. Lint`: Check format of python codes
   3. `2. Build`: Install dependencies & build package
   4. `3. Test`: Do PyTest
   5. `4. Docs`: Create PR (`docs` → `docs-*`) including the build results generated by Sphinx
   6. `Merge From Docs`: If merge PR from `docs`, can merge `docs-*` → `master`
3. `master` push
   1. `Setup`: Commit message parsing
